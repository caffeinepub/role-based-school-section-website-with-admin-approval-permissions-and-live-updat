{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "Build a modern, mobile-responsive Class 8 (DOLON) school section website (GitHub Pages-deployable) with role selection (Student/Visitor/Admin), application + admin approval + login, visitor/admin shared-password access, admin dashboard with advanced controls (including section/item edit locking and master freeze), role/editor management, and live-updating content (notices/homework/routine/schedule) with clear lock indicators and a premium post-login dashboard UI in a professional blue/white animated theme.",
  "architectural_notes": [
    "Target deployment includes GitHub Pages (static hosting); real-time global sync and authentication/approval workflows will require a shared backend or hosted realtime database/service (not achievable with only local browser storage).",
    "App should behave like a single-page app (smooth transitions without full page reload); role-based UI elements must be conditionally rendered/hidden based on authenticated role/permissions.",
    "Lock states (master freeze, per-section locks, per-item locks) must be enforced by the same permissions layer as editing (not only UI-disabled) and persisted/shared so all users see consistent lock status."
  ],
  "known_issues": [
    "App currently renders as a blank white page (likely build/runtime error or routing/asset path issue on deployment).",
    "Student application ‚Üí approval ‚Üí login flow is not working: applicants can log in but cannot see approval/pending status, and pending approvals/users are not appearing in the Admin Dashboard.",
    "Admin Dashboard shows an authorization/access error (\"I don't have access\") when trying to view student applications and approved users; admin cannot fetch these lists."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-implement-a-first-screen-role-selection-ui-with-three-large-interactive-options-student-visitor-admin-selecting-an-option-routes-the-user-into-the-correct-flow-without-full-page-reload-spa-behavior",
      "title": "Implement a first-screen Role Selection UI with three large interactive options: Student, Visitor, Admin; selecting an option routes the user into the correct flow without full page reload (SPA behavior).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-application-level-authentication-session-system-supporting-visitor-shared-password-login-admin-shared-password-login-and-student-account-login-after-admin-approval-sessions-must-persist-across-refresh-e-g-localstorage-and-must-expose-the-current-role-to-the-ui-for-role-based-visibility",
      "title": "Create an application-level authentication + session system supporting: Visitor shared-password login, Admin shared-password login, and Student account login after admin approval. Sessions must persist across refresh (e.g., localStorage) and must expose the current role to the UI for role-based visibility.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-student-application-flow-allow-students-to-submit-an-application-form-collecting-name-class-section-username-password-create-a-pending-student-record-on-submit-block-pending-students-from-accessing-the-main-public-pages-and-show-the-message-your-request-is-waiting-for-admin-approval",
      "title": "Implement the Student Application flow: allow students to submit an application form collecting Name, Class & Section, Username, Password; create a pending student record on submit; block pending students from accessing the main/public pages and show the message: \"Your request is waiting for admin approval.\"",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-dashboard-that-allows-the-admin-to-view-all-student-access-requests-approve-or-reject-pending-applications-manage-student-roles-view-only-vs-editor-and-remove-editor-permissions-all-actions-must-be-performed-from-the-website-ui-no-code-edits",
      "title": "Build an Admin Dashboard that allows the admin to: view all student access requests, approve or reject pending applications, manage student roles (view-only vs editor), and remove editor permissions. All actions must be performed from the website UI (no code edits).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-backend-data-models-and-crud-operations-for-notices-announcements-homework-class-routine-days-periods-subjects-and-class-time-schedule-enforce-permissions-so-only-admin-and-student-editors-can-add-edit-delete-content-visitors-and-approved-non-editor-students-are-view-only",
      "title": "Implement backend data models and CRUD operations for: Notices & Announcements, Homework, Class Routine (days, periods, subjects), and Class Time/Schedule. Enforce permissions so only Admin and Student Editors can add/edit/delete content; Visitors and Approved non-editor students are view-only.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-real-time-global-updates-behavior-so-that-when-an-authorized-user-admin-editor-updates-notices-homework-routine-schedule-all-other-users-see-the-latest-data-automatically-without-manual-refresh-use-a-frontend-auto-refresh-strategy-compatible-with-the-platform-e-g-react-query-refetching-invalidation-and-ensure-users-never-see-a-local-only-divergent-version",
      "title": "Implement ‚Äúreal-time global updates‚Äù behavior so that when an authorized user (admin/editor) updates notices/homework/routine/schedule, all other users see the latest data automatically without manual refresh. Use a frontend auto-refresh strategy compatible with the platform (e.g., React Query refetching + invalidation) and ensure users never see a local-only divergent version.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-role-based-ui-visibility-across-the-entire-app-admin-tools-are-hidden-from-non-admins-editing-controls-are-shown-only-to-admin-and-student-editors-visitors-and-view-only-students-see-only-viewing-ui",
      "title": "Implement role-based UI visibility across the entire app: admin tools are hidden from non-admins; editing controls are shown only to Admin and Student Editors; visitors and view-only students see only viewing UI.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-clean-modern-school-friendly-ui-with-a-consistent-blue-and-white-theme-rounded-cards-soft-shadows-mobile-responsive-layout-and-calm-animations-fade-in-slide-up-hover-and-button-effects-ensure-all-user-facing-text-is-simple-english-and-student-friendly",
      "title": "Create a clean, modern, school-friendly UI with a consistent blue-and-white theme, rounded cards, soft shadows, mobile-responsive layout, and calm animations (fade-in, slide-up, hover and button effects). Ensure all user-facing text is simple English and student-friendly.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-blank-white-page-on-app-load-by-ensuring-the-react-tree-is-wrapped-in-the-app-authentication-provider-so-that-any-component-calling-useauth-e-g-rootcomponent-in-frontend-src-app-tsx-is-always-rendered-within-authprovider-because-frontend-src-main-tsx-is-immutable-implement-this-provider-wrapping-inside-frontend-src-app-tsx-or-another-non-immutable-ancestor-component-without-modifying-frontend-src-main-tsx",
      "title": "Fix the blank white page on app load by ensuring the React tree is wrapped in the app authentication provider so that any component calling `useAuth()` (e.g., `RootComponent` in `frontend/src/App.tsx`) is always rendered within `AuthProvider`. Because `frontend/src/main.tsx` is immutable, implement this provider wrapping inside `frontend/src/App.tsx` (or another non-immutable ancestor component) without modifying `frontend/src/main.tsx`.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-user-visible-runtime-error-fallback-so-that-if-the-app-encounters-an-unexpected-render-router-error-users-see-a-simple-english-error-screen-instead-of-a-blank-white-page-the-fallback-must-show-a-short-message-e-g-something-went-wrong-please-refresh-the-page-and-a-reload-button-and-it-must-log-the-underlying-error-to-the-browser-console-for-debugging",
      "title": "Add a user-visible runtime error fallback so that if the app encounters an unexpected render/router error, users see a simple English error screen instead of a blank white page. The fallback must show a short message (e.g., \"Something went wrong. Please refresh the page.\") and a \"Reload\" button, and it must log the underlying error to the browser console for debugging.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-lock-control-dashboard-ui-within-the-existing-admin-dashboard-route-that-provides-a-master-lock-switch-per-section-lock-toggles-for-notices-homework-routine-class-time-and-per-item-lock-toggles-for-the-latest-items-in-each-section-announcements-homework-routine-s-and-class-time-entries",
      "title": "Add an Admin Lock Control Dashboard UI (within the existing Admin Dashboard route) that provides: a master lock switch, per-section lock toggles for Notices/Homework/Routine/Class Time, and per-item lock toggles for the latest items in each section (announcements, homework, routine(s), and class time entries).",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-display-clear-lock-unlock-indicators-and-locked-visual-states-across-the-app-for-both-sections-and-individual-items-including-greyed-out-content-tooltips-and-disabled-editing-controls-when-locked",
      "title": "Display clear lock/unlock indicators (üîí / üîì) and locked visual states across the app for both sections and individual items, including greyed-out content, tooltips, and disabled editing controls when locked.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-premium-dashboard-style-home-page-for-class-8-dolon-that-becomes-the-primary-post-login-landing-page-for-all-authenticated-roles-admin-student-visitor-and-update-navigation-to-include-it",
      "title": "Create a premium dashboard-style Home page for Class 8 (DOLON) that becomes the primary post-login landing page for all authenticated roles (Admin/Student/Visitor), and update navigation to include it.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-only-home-page-cards-for-pending-student-approval-requests-section-lock-status-overview-and-quick-edit-shortcuts-to-locked-unlocked-sections",
      "title": "Add Admin-only Home page cards for: pending student approval requests, section lock status overview, and quick edit shortcuts to locked/unlocked sections.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-lock-state-fetching-and-mutations-into-the-frontend-using-react-query-so-that-lock-indicators-and-disabled-editing-controls-stay-up-to-date-without-requiring-manual-refresh",
      "title": "Integrate lock-state fetching and mutations into the frontend using React Query so that lock indicators and disabled editing controls stay up-to-date without requiring manual refresh.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-shiny-animated-credit-label-with-the-exact-text-made-by-sunyad-ahmed-shrabon-to-the-global-app-footer-in-the-shared-layout-and-style-it-with-a-subtle-shine-effect-that-matches-the-existing-school-friendly-theme",
      "title": "Add a shiny/animated credit label with the exact text \"Made By Sunyad Ahmed Shrabon\" to the global app footer (in the shared layout) and style it with a subtle ‚Äúshine‚Äù effect that matches the existing school-friendly theme.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-student-login-flow-so-it-cannot-log-in-locally-without-checking-backend-approval-status-when-a-student-attempts-to-log-in-the-app-must-verify-the-username-password-against-backend-data-and-then-1-if-approved-create-a-student-session-and-navigate-to-home-2-if-still-pending-create-a-pending-session-and-navigate-to-pending-approval-3-if-rejected-not-found-invalid-password-show-a-clear-error-and-do-not-create-a-session",
      "title": "Fix the Student Login flow so it cannot log in locally without checking backend approval status. When a student attempts to log in, the app must verify the username+password against backend data and then: (1) if approved, create a student session and navigate to /home; (2) if still pending, create a pending session and navigate to /pending-approval; (3) if rejected/not found/invalid password, show a clear error and do not create a session.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-admin-dashboard-data-visibility-so-pending-applications-and-approved-users-reliably-show-for-admins-the-admin-dashboard-must-1-show-pending-applications-from-the-backend-and-allow-approve-reject-and-2-show-a-list-of-approved-student-users-so-the-admin-can-see-users-and-later-manage-editor-permissions-if-backend-calls-fail-due-to-authorization-the-ui-must-display-an-english-error-state-instead-of-silently-showing-empty-tables",
      "title": "Fix Admin Dashboard data visibility so pending applications and approved users reliably show for admins. The Admin Dashboard must (1) show pending applications from the backend and allow approve/reject; and (2) show a list of approved student users so the admin can see users (and later manage editor permissions). If backend calls fail due to authorization, the UI must display an English error state instead of silently showing empty tables.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-global-footer-credit-text-displays-exactly-made-by-sunyad-ahmed-shrabon-with-a-clear-polished-shine-shimmer-animation-that-is-visible-on-both-desktop-and-mobile-matches-the-existing-school-friendly-theme-and-respects-reduced-motion-preferences",
      "title": "Ensure the global footer credit text displays exactly \"Made By Sunyad Ahmed Shrabon\" with a clear, polished shine/shimmer animation that is visible on both desktop and mobile, matches the existing school-friendly theme, and respects reduced-motion preferences.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-admin-authorization-initialization-so-that-an-admin-who-logs-in-via-the-shared-admin-password-can-successfully-call-admin-only-backend-methods-e-g-getallapplications-and-getstudentslist-without-receiving-an-unauthorized-access-denied-error",
      "title": "Fix admin authorization initialization so that an admin who logs in via the shared admin password can successfully call admin-only backend methods (e.g., `getAllApplications()` and `getStudentsList()`) without receiving an unauthorized/access-denied error.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-admin-dashboard-error-handling-for-the-pending-applications-and-approved-students-queries-so-the-ui-does-not-always-label-any-error-as-access-denied-instead-display-a-clear-english-error-state-that-distinguishes-authorization-failures-from-other-failures-and-includes-the-underlying-error-message-for-debugging",
      "title": "Improve the Admin Dashboard error handling for the Pending Applications and Approved Students queries so the UI does not always label any error as \"Access Denied\"; instead, display a clear English error state that distinguishes authorization failures from other failures and includes the underlying error message for debugging.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Role selection first screen with animated Student / Visitor / Admin options and smooth transitions (SPA-like, no reload)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Student application flow: form (name, class & section, username, password) -> pending status -> blocked until admin approval -> login after approval",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Visitor flow: shared password gate (password: \"dolon\") then view-only access to notices, homework, class routine, class time",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Admin flow: password gate (password: \"dolon.admin\") and dedicated admin dashboard",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Admin dashboard capabilities: view/approve/reject student requests; manage roles; assign/remove editor permissions for students",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Content management: add/edit/delete notices & announcements, homework, class routine (days/periods/subjects), and class time/schedule (admin and editors only)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Real-time global updates: any authorized edit instantly syncs for all users (no local-only content versions)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "UI/UX requirements: consistent blue/white theme, rounded cards/soft shadows, calm animations (fade/slide/hover/button), role-based UI visibility, fully mobile responsive, beginner-friendly structure, in-app editing only",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Advanced admin locking controls: lock/unlock editing per section (Notices/Homework/Routine/Class Time), lock/unlock individual items, and a master switch to freeze all edits; locked content not editable by students or editors",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Locking UI indicators & visual feedback: show lock/unlock icons next to sections and items; locked state greyed-out with tooltip ‚ÄúThis section is locked by admin.‚Äù; smooth animations on lock/unlock",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Premium post-login home/dashboard for Class 8 (DOLON): welcome message, current user role, latest notices preview, today‚Äôs routine, quick-access cards; admin-only cards for pending approvals, lock-status overview, and quick edit shortcuts",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Implement a backend locking system that allows the Admin to control edit access for Class 8 (DOLON) content via: (1) a master lock that freezes all edits, (2) per-section locks for Notices, Homework, Routine, and Class Time, and (3) per-item locks for individual announcements, homework items, routine entries, and class time entries.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Extend backend authorization so that editor assignment/revocation for specific students continues to work, and lock enforcement takes precedence over editor permissions (i.e., being an editor does not bypass any lock).",
      "reqIds": [
        "REQ-12"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Add a shiny/animated credit text label: \"Made By Sunyad Ahmed Shrabon\" (e.g., shine effect in UI/footer)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Update the backend to support a real student authentication + approval-status check for the Student Login page. Add backend methods that can: (a) validate username+password; (b) determine whether the account is pending or approved; (c) return the approved user role (student vs studentEditor) when approved. The backend must persist student credentials after approval (so approved students can still log in).",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add backend support for the Admin Dashboard to fetch approved users (students) for display. Provide a backend admin-only query that returns the list of approved student profiles (at minimum: name, username, role).",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Update frontend actor initialization to ensure `_initializeAccessControlWithSecret(...)` is invoked consistently for admin sessions (including when no Internet Identity identity is present), using the existing `caffeineAdminToken` URL parameter handling in `frontend/src/hooks/useActor.ts`, so that admin backend calls are authorized.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Role-based school section website with admin approval, permissions, and live-updating content",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}